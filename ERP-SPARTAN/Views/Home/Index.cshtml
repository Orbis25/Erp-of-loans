@model HomeVM
@{
    ViewData["Title"] = "Home Page";
}


<!-- Icon Cards-->
<div class="row">
    <div class="col-12 mb-5">
        <h1 class="text-center">Bienvenidos</h1>
    </div>
    @if (User.IsInRole(nameof(RolsAuthorization.Admin)))
    {
        <div class="col-xl-3 col-sm-6 mb-3">
            <div class="card text-white bg-primary o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon">
                        <i class="fas fa-fw fa-people-carry"></i>
                    </div>
                    <div class="mr-5">@Model.Clients  Clientes</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" href="#">
                    <span class="float-left">View Details</span>
                    <span class="float-right">
                        <i class="fas fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
            <div class="card text-white bg-primary o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon">
                        <i class="fas fa-fw fa-user-secret"></i>
                    </div>
                    <div class="mr-5">Roles 4</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" href="#">
                    <span class="float-left">View Details</span>
                    <span class="float-right">
                        <i class="fas fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>
    }

    @if (User.IsInRole(nameof(RolsAuthorization.HILoans)) || User.IsInRole(nameof(RolsAuthorization.ClientsUser)))
    {
        <div class="col-xl-3 col-sm-6 mb-3">
            <div class="card text-white bg-primary o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon">
                        <i class="fas fa-fw fa-people-carry"></i>
                    </div>
                    <div class="mr-5">@Model.Clients  Cliente</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="ClientUser">
                    <span class="float-left">Detalle</span>
                    <span class="float-right">
                        <i class="fas fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
            <div class="card text-white bg-primary o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon">
                        <i class="fas fa-fw fa-building"></i>
                    </div>
                    <div class="mr-5">@Model.Enterprices  Empresa</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="Enterprise">
                    <span class="float-left">Detalle</span>
                    <span class="float-right">
                        <i class="fas fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>

        if (User.IsInRole(nameof(RolsAuthorization.HILoans)))
        {
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-primary o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fas fa-fw fa-money-bill"></i>
                        </div>
                        <div class="mr-5">@StringHelper.FormatMoney(Model.TotalOfLoansDebs) Prestado</div>
                    </div>
                    <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="Loan">
                        <span class="float-left">Detalle</span>
                        <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                        </span>
                    </a>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-primary o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fas fa-fw fa-hand-holding-usd"></i>
                        </div>
                        <div class="mr-5">@Model.TotalOfLoans Prestamos</div>
                    </div>
                    <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="Loan">
                        <span class="float-left">Detalle</span>
                        <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                        </span>
                    </a>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-primary o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fas fa-fw fa-hand-holding-usd"></i>
                        </div>
                        <div class="mr-5">@Model.AverageRate% Tasa Promedio</div>
                    </div>
                    <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="Loan">
                        <span class="float-left">Detalle</span>
                        <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                        </span>
                    </a>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-primary o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fas fa-fw fa-hand-holding-usd"></i>
                        </div>
                        <div class="mr-5"><span class="decimal">@Model.InterestTotal</span> Interes total</div>
                    </div>
                    <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="Loan">
                        <span class="float-left">Detalle</span>
                        <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                        </span>
                    </a>
                </div>
            </div>

        }


        if (User.IsInRole(nameof(RolsAuthorization.ClientsUser)))
        {
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-primary o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fas fa-fw fa-money-bill"></i>
                        </div>
                        <div class="mr-5">@Model.TotalOfDebs deudas</div>
                    </div>
                    <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="ClientUser">
                        <span class="float-left">Detalle</span>
                        <span class="float-right">
                            <i class="fas fa-angle-right"></i>
                        </span>
                    </a>
                </div>
            </div>
        }
    }

    @if (User.IsInRole(nameof(RolsAuthorization.Client)))
    {
        <div class="col">
            <div class="container">
                <img src="~/img/svg/account.png" width="500" class="text-center img-fluid mx-auto d-block" style="align-items:center;align-items:center" />
                <h5 class="text-center">
                    Bienvenido, @User.Identity?.Name si quieres ver tu cuenta pulsa el siguiente botón <br />
                    <a class="btn btn-primary btn-lg mt-3" asp-controller="ClientUser" asp-action="GetMyClientAccount" asp-route-userName="@User.Identity.Name">Cuenta</a>
                </h5>
            </div>
        </div>
    }


    @if (User.IsInRole(nameof(RolsAuthorization.HiInventory)))
    {
        <div class="col-xl-3 col-sm-6 mb-3">
            <div class="card text-white bg-primary o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon">
                        <i class="fas fas fa-boxes"></i>
                    </div>
                    <div class="mr-5">Articulos @Model.Articles</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" asp-action="Index" asp-controller="Inventary">
                    <span class="float-left">Ver</span>
                    <span class="float-right">
                        <i class="fas fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>
    }

    @if (User.IsInRole(nameof(RolsAuthorization.HILoans)))
    {
        <div class="col-12">
            <script>
                fetch('/Loan/OverdueInstallments').then(response => response.text()).then((result) => {
                    $('#pendingPay').empty();
                    $('#pendingPay').append(result);
                    $('#loadingInfo').hide()
                });
            </script>

            <div class="row">
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                    <div class="card">
                        <div class="card-header text-white bg-danger">
                            Clientes Atrasados  <br /> <i id="loadingInfo">Espere un momento estamos cargando información...</i>
                        </div>
                        <div id="pendingPay">
                        </div>
                    </div>
                </div>
            </div>
        </div>

    }
</div>